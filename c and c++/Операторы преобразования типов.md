___

> ***Использовать касты - плохой кодстайл***

---

Преобразовать выражение можно разными способами:

- То, что пришло из C (c-style_cast):

##### `(type)(expr)`:

> Cначала вычисли `expr` а потом преобразуй к `type`
> "сломать все, лишь бы сработало"

Использует ***ВСЕ*** комбинации того, что дальше, пока не сработает 

- То, что добавили в C++:

##### `static_cast<type>(expr)`:

> Вычисли `expr` и преобразуй по всем правилам, которые знаешь к `type`, если такого правила нет - ошибка компиляции


- Называется `static`, так как уже на этапе комплияции понятно, успешно преобразование или нет (потому что занимается приведением типов на этапе компиляции)
- Создает объект из имеющегося
- Самое мягкое преобразование из всех тут

##### `reinterpret_cast<type*>(ptr)`:

> Считай что `ptr` не указатель на то, что на самом деле, а на то, что я написал в `type*`

- Позволяет трактовать один тип, как другой в смысле байт
- Часто используется для приведения указателей один к другому
- Не создает копию, просто начинает интерпретировать кусок памяти по другому

Пример (очень сомнительный, если типы не совместимы):


```cpp
*(reinterpret_cast<type*>(&obj)); //UB скорее всего

double d = 3.14;
reinterpret_cast<int>(d); // ошибка
reinterpret_cast<int&>(d); // выведет первые 4 байта дабла, как инт
```


##### `const_cast<type>(expr)`:

> Возьми то, что expr и перестань считать, что это константа

- Не создает нового объекта (не копирует), просто позволяет трактовать имеющийся объект иначе
- Можно только с указателями и ссылками 

Пример:

```cpp
int x = 5;
const int& y = x;
int& z = const_cast<int&>(y);
// будет UB, если начать менять z
```

##### `dynamic_cast<type>(expr)`:

- Используется для безопасного приведения типов в иерархии наследования. Он работает с **полиморфными типами** (классами, содержащими виртуальные функции) и позволяет проверить, можно ли безопасно привести указатель или ссылку на базовый класс к указателю или ссылке на производный класс
- Проверяет корректность приведения во время выполнения программы
- Если приведение невозможно, `dynamic_cast` возвращает `nullptr` для указателей или выбрасывает исключение `std::bad_cast` для ссылок



---